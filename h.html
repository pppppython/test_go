<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <style>
        *{
            margin:0px;
            padding:0px;
        }
    </style>
</head>

<body>
<div style="margin-left:50px">
    <h3>web上位机测试</h3>
    <div style="border:1px solid;width: 1300px;height: 200px;">
        <div id="msgArea" style="width:100%;height: 100%;overflow-y: scroll"></div>
    </div>
    <div id="te" style="border:1px solid;width: 600px;height: 150px;">
        <p id="te1">春江花月夜</p>
        <p id="te2">春江花月夜</p>
        <p id="te3">春江花月夜</p>
        <p id="te4">春江花月夜</p>
        <p id="te5">春江花月夜</p>
        <p id="te6">春江花月夜</p>
        <p id="te7">春江花月夜</p>
        <p id="te8">春江花月夜</p>
        <p id="te9">春江花月夜</p>
        
    </div>
    <div style="border:1px solid;width: 600px;height: 100px;">
        <div style="width:100%;height: 100%;">
            <textarea id="userMsg" style="width:100%;height: 100%;text-align:start;resize: none;font-family: 微软雅黑;font-size: 20px;"></textarea>
        </div>
    </div>
    <div style="border:1px solid;width: 600px;height: 25px;">
        <button style="float: right;" onclick="sendMsg()">发送</button>
    </div>
</div>
</body>

</html>
<script src="http://libs.baidu.com/jquery/2.1.4/jquery.min.js"></script>
<script>
    var ws;
    $(function(){
        link();
    })
    function link () {
        ws = new WebSocket("ws://localhost:8000/ws");//连接服务器
        ws.onopen = function(event){
            //console.log(event);
            alert('连接了');
        };
        ws.onmessage = function (event) {     //接收到数据
            $('#msgArea').empty();//jQuery
            
            var date = new Date();
            var msg = "<p>"+date.toLocaleString()+"</p>"+"<p>"+event.data+"</p>";
            $("#msgArea").append(msg);
            var arr3=event.data.split(" ");
            arr3.shift()  //删除数组第一个元素
            //arr3.pop();   //删除数组最后一个元素
            document.getElementById("te1").innerHTML =arr3[0]
            document.getElementById("te2").innerHTML =arr3[1]
            document.getElementById("te3").innerHTML =arr3[2]
            document.getElementById("te4").innerHTML =arr3[3]
            document.getElementById("te5").innerHTML =arr3[4]
            document.getElementById("te6").innerHTML =arr3[5]
        }
        ws.onclose = function(event){alert("已经与服务器断开连接\r\n当前连接状态："+this.readyState);};
        ws.onerror = function(event){alert("WebSocket异常！");};
    }
    function sendMsg(){
        document.getElementById("userMsg").value = "";
        var msg = $("#userMsg").val();
        
        ws.send(msg);
    }
</script>